{"ast":null,"code":"import { watchEffect, ref } from 'vue';\nimport { projectFirestore } from '../firebase/config';\n\nconst getDocument = (collection, id) => {\n  let document = ref(null);\n  let error = ref(null); // register the firestore collection reference\n\n  let documentRef = projectFirestore.collection(collection).doc(id);\n  const unsub = documentRef.onSnapshot(doc => {\n    // need to make sure the doc exists & has data\n    if (doc.data()) {\n      document.value = { ...doc.data(),\n        id: doc.id\n      };\n      error.value = null;\n    } else {\n      error.value = 'that document does not exist';\n    }\n  }, err => {\n    console.log(err.message);\n    error.value = 'problem fetching the document';\n  });\n  watchEffect(onInvalidate => {\n    onInvalidate(() => unsub());\n  });\n  return {\n    error,\n    document\n  };\n};\n\nexport default getDocument;","map":{"version":3,"sources":["/home/saumya/Documents/Project.Tech/project-tech/src/composables/getDocument.js"],"names":["watchEffect","ref","projectFirestore","getDocument","collection","id","document","error","documentRef","doc","unsub","onSnapshot","data","value","err","console","log","message","onInvalidate"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,GAAtB,QAAiC,KAAjC;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;AAEA,MAAMC,WAAW,GAAG,CAACC,UAAD,EAAaC,EAAb,KAAoB;AAEtC,MAAIC,QAAQ,GAAGL,GAAG,CAAC,IAAD,CAAlB;AACA,MAAIM,KAAK,GAAGN,GAAG,CAAC,IAAD,CAAf,CAHsC,CAKtC;;AACA,MAAIO,WAAW,GAAGN,gBAAgB,CAACE,UAAjB,CAA4BA,UAA5B,EAAwCK,GAAxC,CAA4CJ,EAA5C,CAAlB;AAEA,QAAMK,KAAK,GAAGF,WAAW,CAACG,UAAZ,CAAuBF,GAAG,IAAI;AAC1C;AACA,QAAGA,GAAG,CAACG,IAAJ,EAAH,EAAe;AACbN,MAAAA,QAAQ,CAACO,KAAT,GAAiB,EAAC,GAAGJ,GAAG,CAACG,IAAJ,EAAJ;AAAgBP,QAAAA,EAAE,EAAEI,GAAG,CAACJ;AAAxB,OAAjB;AACAE,MAAAA,KAAK,CAACM,KAAN,GAAc,IAAd;AACD,KAHD,MAIK;AACHN,MAAAA,KAAK,CAACM,KAAN,GAAc,8BAAd;AACD;AACF,GATa,EASXC,GAAG,IAAI;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACAV,IAAAA,KAAK,CAACM,KAAN,GAAc,+BAAd;AACD,GAZa,CAAd;AAcAb,EAAAA,WAAW,CAAEkB,YAAD,IAAkB;AAC5BA,IAAAA,YAAY,CAAC,MAAMR,KAAK,EAAZ,CAAZ;AACD,GAFU,CAAX;AAIA,SAAO;AAAEH,IAAAA,KAAF;AAASD,IAAAA;AAAT,GAAP;AAED,CA5BD;;AA8BA,eAAeH,WAAf","sourcesContent":["import { watchEffect, ref } from 'vue'\nimport { projectFirestore } from '../firebase/config'\n\nconst getDocument = (collection, id) => {\n\n  let document = ref(null)\n  let error = ref(null)\n\n  // register the firestore collection reference\n  let documentRef = projectFirestore.collection(collection).doc(id)\n\n  const unsub = documentRef.onSnapshot(doc => {\n    // need to make sure the doc exists & has data\n    if(doc.data()) {\n      document.value = {...doc.data(), id: doc.id}\n      error.value = null\n    }\n    else {\n      error.value = 'that document does not exist'\n    }\n  }, err => {\n    console.log(err.message)\n    error.value = 'problem fetching the document'\n  })\n\n  watchEffect((onInvalidate) => {\n    onInvalidate(() => unsub())\n  });\n\n  return { error, document }\n\n}\n\nexport default getDocument"]},"metadata":{},"sourceType":"module"}