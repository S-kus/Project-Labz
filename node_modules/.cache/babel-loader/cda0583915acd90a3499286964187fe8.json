{"ast":null,"code":"import { projectStorage } from '../firebase/config';\nimport { ref } from \"vue\";\nimport getUser from \"./getUser\";\nconst {\n  user\n} = getUser();\n\nconst useStorage = () => {\n  const error = ref(null);\n  const url = ref(null);\n  const filePath = ref(null);\n\n  const uploadImage = async file => {\n    filePath.value = `covers/${user.value.uid}/${file.name}`;\n    const storageRef = projectStorage.ref(filePath.value);\n\n    try {\n      const res = await storageRef.put(file);\n      url.value = await res.ref.getDownloadURL();\n    } catch (err) {\n      console.log(err.message);\n      error.value = err;\n    }\n  };\n\n  const deleteImage = async path => {\n    const storageRef = projectStorage.ref(path);\n\n    try {\n      await storageRef.delete();\n    } catch (err) {\n      console.log(err.message);\n      error.value = err;\n    }\n  };\n\n  return {\n    uploadImage,\n    deleteImage,\n    url,\n    filePath,\n    error\n  };\n};\n\nexport default useStorage;","map":{"version":3,"sources":["/home/saumya/Documents/Project.Tech/project-tech/src/composables/useStorage.js"],"names":["projectStorage","ref","getUser","user","useStorage","error","url","filePath","uploadImage","file","value","uid","name","storageRef","res","put","getDownloadURL","err","console","log","message","deleteImage","path","delete"],"mappings":"AAAA,SAASA,cAAT,QAA+B,oBAA/B;AACA,SAASC,GAAT,QAAoB,KAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAWD,OAAO,EAAxB;;AAEA,MAAME,UAAU,GAAG,MAAM;AACvB,QAAMC,KAAK,GAAGJ,GAAG,CAAC,IAAD,CAAjB;AACA,QAAMK,GAAG,GAAGL,GAAG,CAAC,IAAD,CAAf;AACA,QAAMM,QAAQ,GAAGN,GAAG,CAAC,IAAD,CAApB;;AAEA,QAAMO,WAAW,GAAG,MAAOC,IAAP,IAAgB;AAClCF,IAAAA,QAAQ,CAACG,KAAT,GAAkB,UAASP,IAAI,CAACO,KAAL,CAAWC,GAAI,IAAGF,IAAI,CAACG,IAAK,EAAvD;AACA,UAAMC,UAAU,GAAGb,cAAc,CAACC,GAAf,CAAmBM,QAAQ,CAACG,KAA5B,CAAnB;;AAEA,QAAI;AACF,YAAMI,GAAG,GAAG,MAAMD,UAAU,CAACE,GAAX,CAAeN,IAAf,CAAlB;AACAH,MAAAA,GAAG,CAACI,KAAJ,GAAY,MAAMI,GAAG,CAACb,GAAJ,CAAQe,cAAR,EAAlB;AACD,KAHD,CAGE,OAAOC,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACAf,MAAAA,KAAK,CAACK,KAAN,GAAcO,GAAd;AACD;AACF,GAXD;;AAaA,QAAMI,WAAW,GAAG,MAAOC,IAAP,IAAgB;AAClC,UAAMT,UAAU,GAAGb,cAAc,CAACC,GAAf,CAAmBqB,IAAnB,CAAnB;;AAEA,QAAI;AACF,YAAMT,UAAU,CAACU,MAAX,EAAN;AACD,KAFD,CAEE,OAAON,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACAf,MAAAA,KAAK,CAACK,KAAN,GAAcO,GAAd;AACD;AACF,GATD;;AAWA,SAAO;AAAET,IAAAA,WAAF;AAAea,IAAAA,WAAf;AAA4Bf,IAAAA,GAA5B;AAAiCC,IAAAA,QAAjC;AAA2CF,IAAAA;AAA3C,GAAP;AACD,CA9BD;;AAgCA,eAAeD,UAAf","sourcesContent":["import { projectStorage } from '../firebase/config'\nimport { ref } from \"vue\"\nimport getUser from \"./getUser\"\n\nconst { user } = getUser()\n\nconst useStorage = () => {\n  const error = ref(null)\n  const url = ref(null)\n  const filePath = ref(null)\n\n  const uploadImage = async (file) => {\n    filePath.value = `covers/${user.value.uid}/${file.name}`\n    const storageRef = projectStorage.ref(filePath.value)\n\n    try {\n      const res = await storageRef.put(file)\n      url.value = await res.ref.getDownloadURL()\n    } catch (err) {\n      console.log(err.message)\n      error.value = err\n    }\n  }\n\n  const deleteImage = async (path) => {\n    const storageRef = projectStorage.ref(path);\n\n    try {\n      await storageRef.delete()\n    } catch (err) {\n      console.log(err.message)\n      error.value = err\n    }\n  }\n\n  return { uploadImage, deleteImage, url, filePath, error }\n}\n\nexport default useStorage;"]},"metadata":{},"sourceType":"module"}