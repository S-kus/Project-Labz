{"ast":null,"code":"import _asyncToGenerator from \"/home/saumya/Documents/Project.Tech/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport AddProject from '@/components/AddProject.vue';\nimport useStorage from '@/composables/useStorage';\nimport useDocument from '@/composables/useDocument';\nimport getDocument from '@/composables/getDocument';\nimport getUser from '@/composables/getUser';\nimport { computed } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  props: ['id'],\n  components: {\n    AddProject: AddProject\n  },\n  setup: function setup(props) {\n    var _getDocument = getDocument('projectlists', props.id),\n        error = _getDocument.error,\n        projectlist = _getDocument.document;\n\n    var _getUser = getUser(),\n        user = _getUser.user;\n\n    var _useDocument = useDocument('projectlists', props.id),\n        deleteDoc = _useDocument.deleteDoc,\n        updateDoc = _useDocument.updateDoc;\n\n    var _useStorage = useStorage(),\n        deleteImage = _useStorage.deleteImage;\n\n    var router = useRouter();\n    var ownership = computed(function () {\n      return projectlist.value && user.value && user.value.uid == projectlist.value.userId;\n    });\n\n    var handleDelete = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return deleteDoc();\n\n              case 2:\n                _context.next = 4;\n                return deleteImage(projectlist.value.filePath);\n\n              case 4:\n                router.push({\n                  name: 'Home'\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function handleDelete() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    var handleClick = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id) {\n        var projects;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                projects = projectlist.value.projects.filter(function (project) {\n                  return project.id != id;\n                });\n                _context2.next = 3;\n                return updateDoc({\n                  projects: projects\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function handleClick(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    return {\n      error: error,\n      projectlist: projectlist,\n      ownership: ownership,\n      handleDelete: handleDelete,\n      handleClick: handleClick\n    };\n  }\n};","map":{"version":3,"mappings":";;;;AA6BA,OAAOA,UAAP,MAAuB,6BAAvB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,QAAT,QAAyB,KAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AAEA,eAAe;AACbC,OAAK,EAAE,CAAC,IAAD,CADM;AAEbC,YAAU,EAAE;AAAER,cAAS,EAATA;AAAF,GAFC;AAGbS,OAHa,iBAGPF,KAHO,EAGA;AACX,uBAAwCJ,WAAW,CAAC,cAAD,EAAiBI,KAAK,CAACG,EAAvB,CAAnD;AAAA,QAAQC,KAAR,gBAAQA,KAAR;AAAA,QAAyBC,WAAzB,gBAAeC,QAAf;;AACA,mBAAiBT,OAAO,EAAxB;AAAA,QAAQU,IAAR,YAAQA,IAAR;;AACA,uBAAgCZ,WAAW,CAAC,cAAD,EAAiBK,KAAK,CAACG,EAAvB,CAA3C;AAAA,QAAQK,SAAR,gBAAQA,SAAR;AAAA,QAAmBC,SAAnB,gBAAmBA,SAAnB;;AACA,sBAAwBf,UAAU,EAAlC;AAAA,QAAQgB,WAAR,eAAQA,WAAR;;AACA,QAAMC,MAAK,GAAIZ,SAAS,EAAxB;AAEA,QAAMa,SAAQ,GAAId,QAAQ,CAAC,YAAM;AAC/B,aAAOO,WAAW,CAACQ,KAAZ,IACFN,IAAI,CAACM,KADH,IAEFN,IAAI,CAACM,KAAL,CAAWC,GAAX,IAAkBT,WAAW,CAACQ,KAAZ,CAAkBE,MAFzC;AAGD,KAJyB,CAA1B;;AAMA,QAAMC,YAAW;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACbR,SAAS,EADI;;AAAA;AAAA;AAAA,uBAEbE,WAAW,CAACL,WAAW,CAACQ,KAAZ,CAAkBI,QAAnB,CAFE;;AAAA;AAGnBN,sBAAM,CAACO,IAAP,CAAY;AAAEC,sBAAI,EAAE;AAAR,iBAAZ;;AAHmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAXH,YAAW;AAAA;AAAA;AAAA,OAAjB;;AAMA,QAAMI,WAAU;AAAA,0EAAI,kBAAOjB,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZkB,wBADY,GACDhB,WAAW,CAACQ,KAAZ,CAAkBQ,QAAlB,CAA2BC,MAA3B,CAAkC,UAACC,OAAD;AAAA,yBAAaA,OAAO,CAACpB,EAAR,IAAcA,EAA3B;AAAA,iBAAlC,CADC;AAAA;AAAA,uBAEZM,SAAS,CAAC;AAAEY,0BAAO,EAAPA;AAAF,iBAAD,CAFG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAVD,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAKA,WAAO;AAAEhB,WAAK,EAALA,KAAF;AAASC,iBAAW,EAAXA,WAAT;AAAsBO,eAAS,EAATA,SAAtB;AAAiCI,kBAAY,EAAZA,YAAjC;AAA+CI,iBAAW,EAAXA;AAA/C,KAAP;AACF;AA5Ba,CAAf","names":["AddProject","useStorage","useDocument","getDocument","getUser","computed","useRouter","props","components","setup","id","error","projectlist","document","user","deleteDoc","updateDoc","deleteImage","router","ownership","value","uid","userId","handleDelete","filePath","push","name","handleClick","projects","filter","project"],"sourceRoot":"","sources":["/home/saumya/Documents/Project.Tech/src/views/projectlists/ProjectlistDetails.vue"],"sourcesContent":["<template>\n  <div>\n      <div class=\"error\" v-if=\"error\">{{ error }}</div>\n          <div v-if=\"projectlist \" class=\"playlist-details\">\n            <div class=\"playlist-info\">\n              <div class=\"cover\">\n                  <img :src=\"projectlist.coverUrl\">\n              </div>\n              <h2>{{ projectlist.title }}</h2>\n              <p class=\"username\">Created by {{ projectlist.userName }}</p>\n              <p class=\"description\">{{ projectlist.description }}</p>\n              <button v-if=\"ownership\" @click=\"handleDelete\">Delete Projectlist</button>\n            </div>\n            <div class=\"song-list\">\n              <div v-if=\"!projectlist.projects.length\">No projects have been added to this projectlist yet.</div>\n              <div v-for=\"project in projectlist.projects\" :key=\"project.id\" class=\"single-song\">\n                  <div class=\"details\">\n                    <h3>{{ project.title }}</h3>\n                    <a :href=\"project.codelink\" target=\"_blank\">Codebase Link</a>\n                  </div>\n                  <button v-if=\"ownership\" @click=\"handleClick(project.id)\">Delete</button>\n              </div>\n              <AddProject v-if=\"ownership\" :projectlist=\"projectlist\" />\n            </div>\n          </div>\n  </div>\n</template>\n\n<script>\nimport AddProject from '@/components/AddProject.vue'\nimport useStorage from '@/composables/useStorage'\nimport useDocument from '@/composables/useDocument'\nimport getDocument from '@/composables/getDocument'\nimport getUser from '@/composables/getUser'\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  props: ['id'],\n  components: { AddProject },\n  setup(props) {\n    const { error, document: projectlist} = getDocument('projectlists', props.id)\n    const { user } = getUser()\n    const { deleteDoc, updateDoc} = useDocument('projectlists', props.id)\n    const { deleteImage } = useStorage()\n    const router = useRouter()\n\n    const ownership = computed(() => {\n      return projectlist.value \n        && user.value \n        && user.value.uid == projectlist.value.userId\n    })\n\n    const handleDelete = async () => {\n      await deleteDoc()\n      await deleteImage(projectlist.value.filePath)\n      router.push({ name: 'Home' })\n    }\n\n    const handleClick = async (id) => {\n      const projects = projectlist.value.projects.filter((project) => project.id != id)\n      await updateDoc({ projects })\n    }\n\n    return { error, projectlist, ownership, handleDelete, handleClick}\n  }\n}\n</script>\n\n<style>\n  .playlist-details {\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    gap: 80px;\n  }\n  .cover {\n    overflow: hidden;\n    border-radius: 20px;\n    position: relative;\n    padding: 160px;\n  }\n  .cover img {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    min-width: 100%;\n    min-height: 100%;\n    max-width: 200%;\n    max-height: 200%;\n  }\n  .playlist-info {\n    text-align: center;\n  }\n  .playlist-info h2 {\n    text-transform: capitalize;\n    font-size: 28px;\n    margin-top: 20px;\n  }\n  .playlist-info p {\n    margin-bottom: 20px;\n  }\n  .username {\n    color: #999;\n  }\n  .description {\n    text-align: left;\n  }\n  .single-song {\n    padding: 10px 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px dashed var(--secondary);\n    margin-bottom: 20px;\n  }\n  .details a{\n    text-decoration: underline;\n  }\n  .details a:hover{\n    color: #aaa\n  }\n</style>"]},"metadata":{},"sourceType":"module"}